!function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i){window.onload=function(){var t=document.getElementById("canvas");t.width=window.innerWidth,t.height=window.innerHeight;var i=t.getContext("2d"),e=3,o=3,n={collisionObjects:[],player1Score:0,player2Score:0,remainingTime:6e4,startTime:void 0,endTime:void 0,init:function(){player1Score=0,player2Score=0,this.startTime=new Date,this.endTime=new Date(this.startTime.getTime()+6e4),this.remainingTime=this.endTime.getTime()-this.startTime.getTime()},getRemainingTime:function(){var t=new Date;this.remainingTime=this.endTime.getTime()-t},endGameCheck:function(){this.remainingTime<=0&&(this.isOver=!0)},loadStage:function(){},updateUI:function(){i.font="30px Helvetica",i.fillStyle=y.color,i.fillText("Player 1: "+this.player1Score,10,40),i.fillStyle=g.color,i.fillText("Player 2: "+this.player2Score,10,70),i.fillStyle="White",i.fillText("T-Minus: "+Math.floor(this.remainingTime/1e3),t.width/2,40)},updatePhysics:function(){this.collisionObjects.forEach(t=>{t.updateBounds()}),this.collisionObjects.forEach(t=>{var i=[];this.collisionObjects.forEach(e=>{i.push(t.bounds.overlapsBox(e.bounds))}),t.bounds.isColliding=i.filter(t=>!0===t).length>0}),this.collisionObjects.forEach(t=>t.collisionResponse())}},s={color:"#000000",width:t.width,height:t.height,x:0,y:0,render:function(){i.fillStyle=this.color,i.fillRect(this.x,this.y,this.width,this.height)}};class h{constructor(t,i){this.x=t,this.y=i}}class l{constructor(t,i){this.topLeft=t,this.bottomRight=i,this.isColliding=!1,this.collisionPosition=new h(this.topLeft.x,this.topLeft.y)}containsPoint(t){var i=!1;return t.x>=this.topLeft.x&&t.x<=this.bottomRight.x&&t.y>=this.topLeft.y&&t.y<=this.bottomRight.y&&(i=!0),console.log("contains point( "+t.x+", "+t.y+") "+i),i}overlapsBox(t){var i=!1;return t!=this&&t instanceof l&&t.bottomRight.x>=this.topLeft.x&&t.topLeft.x<=this.bottomRight.x&&t.bottomRight.y>=this.topLeft.y&&t.topLeft.y<=this.bottomRight.y&&(i=!0,this.collisionPosition=new h(this.topLeft.x,this.topLeft.y)),i}}var r=new h(100,300),c={color:"#057905",width:t.width-3*r.x,height:275,x:1.5*r.x,y:t.height-275,previousPosition:new h(null,null)};class d{constructor(t,i,e,o){this.moveUp=t,this.moveDown=i,this.moveLeft=e,this.moveRight=o}}var a=new d("w","s","a","d"),u=new d("ArrowUp","ArrowDown","ArrowLeft","ArrowRight");class p{constructor(t,i,e,o,s){this.color=t,this.width=i,this.height=e,this.x=o,this.y=s,this.updateBounds(),this.debugColor="#ffff00",this.collisionHelper=!1,this.previousPosition=new h(null,null),n.collisionObjects.push(this)}updateBounds(){var t=new h(this.x,this.y),i=new h(this.x+this.width,this.y+this.height);this.bounds=new l(t,i)}render(){this.bounds.isColliding&&this.collisionHelper?i.fillStyle=this.debugColor:i.fillStyle=this.color,i.fillRect(this.x,this.y,this.width,this.height)}collisionResponse(){this.bounds.isColliding&&this.bounds.topLeft.x==this.bounds.collisionPosition.x&&(this.x=this.previousPosition.x),this.bounds.isColliding&&this.bounds.topLeft.y==this.bounds.collisionPosition.y&&(this.y=this.previousPosition.y)}init(){this.x=t.width/2-this.width/2,this.y=t.height/2-this.height/2,console.log(this.x,this.y)}setCollisionHelper(t){this.collisionHelper=t}}class w extends p{constructor(t,i,e,o,n,s){super(t,i,e,o,n),this.controls=s}updateInput(){1==x[this.controls.moveRight]&&(this.x+=e),1==x[this.controls.moveUp]&&(this.y-=o),1==x[this.controls.moveLeft]&&(this.x+=-e),1==x[this.controls.moveDown]&&(this.y+=o)}}var f,y,g,m=[new h(t.width/2-r.x,t.height/2-r.y/2),new h(t.width/2+r.x,t.height/2-r.y/2)],x={w:!1,a:!1,s:!1,d:!1};function v(){y.updateInput(),g.updateInput(),i.clearRect(0,0,window.innerWidth,window.innerHeight),y.y+y.height>t.height-50&&(n.player2Score+=1),g.y+g.height>t.height-50&&(n.player1Score+=1),n.updatePhysics();window.innerWidth,window.innerHeight;s.render(),f.render(),y.render(),g.render(),n.getRemainingTime(),n.endGameCheck(),n.isOver&&(i.font="100px Helvetica",i.fillStyle="Yellow",i.textAlign="center",i.fillText("Game Over",t.width/2,t.height/2)),y.previousPosition=new h(y.x,y.y),g.previousPosition=new h(g.x,g.y),f.previousPosition=new h(f.x,f.y),console.log(t.width),n.updateUI(),window.requestAnimationFrame(v)}n.init(),f=new p(c.color,c.width,c.height,c.x,c.y),y=new w("#ff0000",r.x,r.y,m[0].x,m[0].y,a),g=new w("#0000ff",r.x,r.y,m[1].x,m[1].y,u),f.name="Stage",y.name="Player 1",g.name="Player 2",f.setCollisionHelper(!0),y.setCollisionHelper(!0),g.setCollisionHelper(!0),window.addEventListener("keydown",function(t){x[t.key]=!0}),window.addEventListener("keyup",function(t){x[t.key]=!1}),window.requestAnimationFrame(v)}}]);